#!groovy
properties([buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '2', numToKeepStr: '2')), disableConcurrentBuilds(), disableResume(), parameters([string(defaultValue: 'create', description: '', name: 'OPERATION', trim: true), string(defaultValue: '1', description: '', name: 'COUNT', trim: true)])])
node('builder-1') {
  stage('Checkout')  {
    git credentialsId: 'master-github-ssh', url: 'git@github.com:Ihor-Porokhnia/CICD.git'
  }
  {
   stage('Set Terraform') {
    steps {
      script {
        def tfHome = tool name: 'Terraform'
        env.PATH = "${tfHome}:${env.PATH}"
              }
        sh 'terraform -version'
      }
 }
  stage('TerraPlay')  {    

   // if (OPERATION == 'create') {
              sh 'terraform init ./devexp/terra/plan_vault/vault.tf'
    
    //}
      
              
    }
  }
}
