#!groovy

properties([disableConcurrentBuilds()])

node('Backend'){
    sh 'echo $ref'
    if ( ref == 'refs/heads/backend' )  {
        stage('Checkout')  {
            git branch: 'backend', credentialsId: 'ssh-key-main', url: 'git@github.com:Ihor-Porokhnia/WebApp.git'
        }
        stage('Checkout')  {
            sh 'mvn clean install'
        }
    } else {
              sh 'echo notback'
    }
}


node('Frontend'){
    if ( ref == 'refs/heads/frontend')  {
              sh 'echo $ref'
    } else {
              sh 'echo notfront'
    }
}
